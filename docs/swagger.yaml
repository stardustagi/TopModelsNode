basePath: /api
definitions:
  requests.AddModelsInfoRequest:
    properties:
      models_infos:
        items:
          $ref: '#/definitions/requests.ModelsInfo'
        type: array
    type: object
  requests.AddModelsProviderInfoRequest:
    properties:
      models_provider_info:
        items:
          $ref: '#/definitions/requests.ModelsProviderInfo'
        type: array
    type: object
  requests.ListNodeInfoRequest:
    properties:
      node_user_id:
        type: integer
      page_info:
        $ref: '#/definitions/requests.PageReq'
    type: object
  requests.ListUsersRequest:
    properties:
      email:
        type: string
      page:
        $ref: '#/definitions/requests.PageReq'
      status:
        description: 0:全部 1:正常 2:禁用
        enum:
        - 0
        - 1
        - 2
        type: integer
      username:
        type: string
    type: object
  requests.MapModelsProviderInfoToNodeRequest:
    properties:
      model_id:
        type: integer
      node_id:
        type: integer
      provider_ids:
        items:
          type: integer
        type: array
    required:
    - model_id
    - node_id
    - provider_ids
    type: object
  requests.ModelsInfo:
    properties:
      address:
        type: string
      api_version:
        type: string
      cache_price:
        type: integer
      deploy_name:
        type: string
      input_price:
        type: integer
      is_private:
        type: integer
      name:
        type: string
      output_price:
        type: integer
      owner_id:
        type: integer
      status:
        type: string
    required:
    - api_version
    - deploy_name
    - name
    type: object
  requests.ModelsProviderInfo:
    properties:
      api_keys:
        type: string
      api_type:
        type: string
      cache_price:
        type: integer
      endpoint:
        type: string
      input_price:
        type: integer
      model_name:
        type: string
      name:
        type: string
      output_price:
        type: integer
      type:
        type: string
    required:
    - endpoint
    - name
    - type
    type: object
  requests.NodeReportUsageReq:
    properties:
      node_id:
        type: string
      report:
        items:
          $ref: '#/definitions/requests.UsageReport'
        type: array
    required:
    - node_id
    type: object
  requests.NodeUnRegisterReq:
    properties:
      mail:
        type: string
      name:
        type: string
    required:
    - mail
    - name
    type: object
  requests.PageReq:
    properties:
      limit:
        type: integer
      skip:
        type: integer
      sort:
        type: string
    required:
    - limit
    - skip
    type: object
  requests.RegisterUserRequest:
    properties:
      email:
        type: string
      nickname:
        type: string
      password:
        maxLength: 100
        minLength: 6
        type: string
      phone:
        maxLength: 15
        minLength: 11
        type: string
      username:
        maxLength: 50
        minLength: 3
        type: string
    required:
    - email
    - password
    - phone
    - username
    type: object
  requests.TokenUsage:
    properties:
      cached_tokens:
        type: integer
      input_tokens:
        type: integer
      latency:
        type: number
      output_tokens:
        type: integer
      reasoning_tokens:
        type: integer
      tokens_per_sec:
        type: integer
    type: object
  requests.UpdateUserInfoRequest:
    properties:
      avatar:
        type: string
      email:
        type: string
      nickname:
        maxLength: 50
        type: string
      phone:
        maxLength: 15
        minLength: 11
        type: string
      user_id:
        type: integer
    required:
    - user_id
    type: object
  requests.UpsetNodeInfoRequest:
    properties:
      access_key:
        type: string
      company_id:
        type: integer
      domain:
        type: string
      name:
        type: string
      node_user_id:
        type: integer
      secret_key:
        type: string
    type: object
  requests.UsageReport:
    properties:
      actual_model:
        description: 实际使用的模型
        type: string
      actual_provider:
        description: 实际服务商
        type: string
      actual_provider_id:
        description: 实际服务商id
        type: string
      agent_version:
        type: string
      caller:
        type: string
      caller_key:
        type: string
      client_version:
        type: string
      created_at:
        type: integer
      id:
        type: string
      is_private:
        description: 是否私有模型
        type: integer
      model:
        type: string
      model_id:
        description: 模型id（计费使用）
        type: string
      node_id:
        type: string
      provider:
        type: string
      stream:
        type: boolean
      token_usage:
        $ref: '#/definitions/requests.TokenUsage'
    type: object
  requests.UserBalanceReq:
    properties:
      user_id:
        type: integer
      wallet_type:
        type: string
    required:
    - user_id
    - wallet_type
    type: object
  responses.DefaultResponse:
    type: object
  responses.GetUserInfoResponse:
    properties:
      user_info:
        $ref: '#/definitions/responses.UserInfoResponse'
    type: object
  responses.ListUsersResponse:
    properties:
      list:
        items:
          $ref: '#/definitions/responses.UserInfoResponse'
        type: array
      total:
        type: integer
    type: object
  responses.LoginUserResponse:
    properties:
      expire_at:
        type: string
      token:
        type: string
      user_info:
        $ref: '#/definitions/responses.UserInfoResponse'
    type: object
  responses.LogoutUserResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
    type: object
  responses.UpdateUserInfoResponse:
    properties:
      user_info:
        $ref: '#/definitions/responses.UserInfoResponse'
    type: object
  responses.UserBalanceResp:
    properties:
      balance:
        type: integer
      wallet_address:
        type: string
      wallet_type:
        type: string
    type: object
  responses.UserInfoResponse:
    properties:
      avatar:
        type: string
      create_time:
        type: string
      email:
        type: string
      nickname:
        type: string
      phone:
        type: string
      status:
        description: 1:正常 2:禁用
        type: integer
      update_time:
        type: string
      user_id:
        type: integer
      username:
        type: string
    type: object
host: localhost:8081
info:
  contact: {}
  description: This is the backend services for TopModelsLogin, providing user management
    and LLM
  title: TopModelsLogin Backend Service
  version: "1.0"
paths:
  /node/llm/addModelsInfos:
    post:
      consumes:
      - application/json
      description: 添加模型信息
      parameters:
      - description: 请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.AddModelsInfoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 添加模型信息
      tags:
      - node/llm
  /node/llm/addModelsProvider:
    post:
      consumes:
      - application/json
      description: 添加模型供应商
      parameters:
      - description: 请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.AddModelsProviderInfoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 添加模型供应商
      tags:
      - NodeLLM
  /node/llm/billingUsage:
    post:
      consumes:
      - application/json
      description: 节点计费上报
      parameters:
      - description: 请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.NodeReportUsageReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 节点计费上报
      tags:
      - node
  /node/llm/listNodeInfos:
    post:
      consumes:
      - application/json
      description: 获取模型信息
      parameters:
      - description: 请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.ListNodeInfoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 获取模型信息
      tags:
      - node
  /node/llm/mapModelsProviderInfoToNode:
    post:
      consumes:
      - application/json
      description: 映射模型和模型供应商
      parameters:
      - description: 请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.MapModelsProviderInfoToNodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 映射模型和模型供应商
      tags:
      - NodeLLM
  /node/llm/nodeUnRegister:
    post:
      consumes:
      - application/json
      description: LLM节点用户注销
      parameters:
      - description: 节点用户ID
        in: query
        name: nodeUserId
        required: true
        type: integer
      - description: 节点用户注销请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.NodeUnRegisterReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "400":
          description: 参数错误
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: LLM节点用户注销
      tags:
      - LLM模型节点管理
  /node/llm/upsetNodeInfos:
    post:
      consumes:
      - application/json
      description: 添加/更新节点信息
      parameters:
      - description: 请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.UpsetNodeInfoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 添加/更新节点信息
      tags:
      - node
  /node/public/login:
    post:
      description: 登录用户
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.LoginUserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 登录用户
  /node/user/checkUserBalance:
    post:
      consumes:
      - application/json
      description: 节点查询用户余额接口
      parameters:
      - description: 节点ID
        in: header
        name: nodeId
        required: true
        type: string
      - description: 请求参数
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/requests.UserBalanceReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.UserBalanceResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 节点查询用户余额接口
      tags:
      - 节点管理
  /node/user/getUserInfo:
    post:
      consumes:
      - application/json
      description: 获取用户信息
      parameters:
      - description: 用户ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.GetUserInfoResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 获取用户信息
      tags:
      - 用户
  /node/user/listUsers:
    post:
      consumes:
      - application/json
      description: 用户列表
      parameters:
      - description: 用户列表
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/requests.ListUsersRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.ListUsersResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 用户列表
      tags:
      - 用户
  /node/user/logout:
    post:
      consumes:
      - application/json
      description: 用户登出
      parameters:
      - description: 用户ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.LogoutUserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 用户登出
      tags:
      - 用户
  /node/user/updateUserInfo:
    post:
      consumes:
      - application/json
      description: 更新用户信息
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/requests.UpdateUserInfoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.UpdateUserInfoResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 更新用户信息
      tags:
      - 用户
  /users/system/nodeUserActive:
    get:
      consumes:
      - application/json
      description: 激活节点用户
      parameters:
      - description: 节点用户ID
        in: query
        name: nodeUserId
        required: true
        type: string
      - description: 节点用户激活码
        in: query
        name: nodeUserActiveCode
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 激活节点用户
      tags:
      - Node
  /users/system/register:
    post:
      consumes:
      - application/json
      description: 注册节点用户
      parameters:
      - description: 注册节点用户请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.RegisterUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/responses.DefaultResponse'
      summary: 注册节点用户
      tags:
      - Node
swagger: "2.0"
